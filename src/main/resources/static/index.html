<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!--<script src="script.js"></script>-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans Thai', sans-serif;
        }

        body {
            background-color: whitesmoke;
        }

        .color-bar1 {
            width: 100vw;
            height: 30px;
            background-color: #b83846;
        }

        .color-bar2 {
            width: 100vw;
            height: 20px;
            background-color: #f5ca66;
        }

        .color-bar3 {
            width: 100vw;
            height: 50px;
            display: flex;
        }

        .left-bar3 {
            width: 20%;
            background-color: #b83846;
        }

        .right-bar3 {
            width: 80%;
            background-color: #5e6669;
        }

        .dropbtn {
            background-color: #ffffff;
            color: rgb(0, 0, 0);
            padding: 5px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #ffffff;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #cecece;
        }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

</head>

<body>
    <div class="color-bar1"></div>
    <div class="color-bar2"></div>

    <div class="d-flex justify-content-center">
        <img src="Capture1.PNG" class="img-fluid" class="imge-Responsive">
    </div>

    <div class="color-bar3">
        <div class="left-bar3"></div>
        <div class="right-bar3"></div>
    </div>

    <form id="myForm">
        <div class="d-flex justify-content-center mt-5">
            <div class="d-flex gap-2">
                <h1>LOGIN PAGE</h1>
            </div>
        </div>
        <div class="d-flex justify-content-center ">
            <div class="d-flex p-2">

                <div class="form-group">
                    <div class="d-flex gap-2">
                        <h4>Username</h4>
                    </div>
                    <input type="text" class="form-control" id="username"
                        style="width: 600px; height: 60px; font-size: 14px;">
                </div>

            </div>

        </div>
        <div class="d-flex justify-content-center ">
            <div class="d-flex p-2">
                <div class="form-group">
                    <div class="d-flex gap-2">
                        <h4>Password</h4>
                    </div>
                    <input type="text" class="form-control" id="password"
                        style="width: 600px; height: 60px; font-size: 14px;">
                </div><br>
                <button class="btn" type="submit">Submit</button>
    </form>

    </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("myForm");
            const url = "http://localhost:8080/api/student/login";
    
            form.addEventListener("submit", function (event) {
                event.preventDefault();
    
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;
    
                const formData = {
                    'email': username,
                    'password': password
                };
    
                const jsonData = JSON.stringify(formData, null, 2);
                console.log(jsonData);
    
                fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: jsonData,
                })
                .then((response) => {
                    if (!response.ok) {
                        throw new Error("Login failed");
                    }
                    return response;
                })

                .then((data) => {
                    // Assuming the server responds
                    const isLogin = data;
                    console.log(isLogin)
    
                    if (isLogin) {
                        if (username.includes('@dome')) {
                            // window.location.href = "Profile.html";
                            alert("go to <Profile page>");
                        } else if (username.includes('@staff')) {
                            // window.location.href = "<teacher approve page>"; 
                            alert("go to <teacher approve page>");
                        }else {
                            alert("Please use Thamasat university email");
                        }
                    } else {
                        alert("Login failed");
                    }
                })
                .catch((error) => {
                    alert("Login failed: " + error.message);
                });
            });
        });
    </script>
    
</body>

</html>